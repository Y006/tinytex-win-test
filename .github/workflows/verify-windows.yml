name: Verify Real Windows

on: [push]

jobs:
  investigate:
    runs-on: windows-latest  # 这里我们需要验证它到底是不是真的 Windows

    steps:
    - name: 1. 验明正身 (检查操作系统版本)
      run: |
        Write-Host "当前操作系统: $env:OS"
        [System.Environment]::OSVersion.VersionString
        # 只有 Windows 才有 systeminfo 命令，且输出格式极具特征
        systeminfo | Select-Object -First 5

    - name: 2. 检查盘符 (寻找 C 盘)
      run: |
        # Linux 没有 C 盘，只有根目录 /
        Get-PSDrive -PSProvider FileSystem
        Write-Host "C盘根目录文件:"
        Get-ChildItem C:\ -Force | Select-Object -First 5 Name

    - name: 3. 检查环境变量 (Windows 特有变量)
      run: |
        # 打印 Windows 特有的路径变量
        Write-Host "SystemRoot: $env:SystemRoot"
        Write-Host "USERPROFILE: $env:USERPROFILE"
        Write-Host "APPDATA: $env:APPDATA"